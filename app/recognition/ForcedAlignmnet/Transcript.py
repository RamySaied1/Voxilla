from ForcedAlignment import ForcedAlignment

class Transcript:
    def __init__(self,wordsLexiconFile = "words_lexicon.txt", phonesLexiconFile = "phones_lexicon.txt", silence_phones = ["sil","spn"]):
        self.fa = ForcedAlignment(wordsLexiconFile, phonesLexiconFile)

    def get_transcript(self, decouderOutPath, framesCount):
        self.acoustics_seg_tree = self.fa.align(decouderOutPath, framesCount)
        return list(zip(self.acoustics_seg_tree.get_level_labels("words"), self.acoustics_seg_tree.get_level_ranges("words","frames")))

    
if __name__ == "__main__":
    trans = Transcript("words_lexicon.txt","phones_lexicon.txt")
    decouderOutPath = [('sil_s0', '<eps>', '4'), ('sil_s0', '<eps>', '4'), ('sil_s0', '<eps>', '4'), ('sil_s0', '<eps>', '4'), ('sil_s0', '<eps>', '4'), ('sil_s0', '<eps>', '4'), ('sil_s0', '<eps>', '4'), ('sil_s0', '<eps>', '4'), ('sil_s0', '<eps>', '4'), ('sil_s0', '<eps>', '4'), ('sil_s0', '<eps>', '4'), ('sil_s0', '<eps>', '4'), ('sil_s0', '<eps>', '4'), ('sil_s0', '<eps>', '4'), ('sil_s0', '<eps>', '4'), ('sil_s0', '<eps>', '4'), ('sil_s0', '<eps>', '4'),
    ('sil_s0', '<eps>', '4'), ('sil_s0', '<eps>', '4'), ('sil_s0', '<eps>', '4'), ('sil_s0', '<eps>', '4'), ('sil_s0', '<eps>', '4'), ('sil_s0', '<eps>', '4'), ('sil_s0', '<eps>', '4'), ('sil_s0', '<eps>', '4'), ('sil_s0', '<eps>', '4'), ('sil_s0', '<eps>', '4'), ('sil_s0', '<eps>', '4'), ('sil_s0', '<eps>', '4'), ('sil_s0', '<eps>', '4'), ('sil_s0', '<eps>', '4'), ('sil_s0', '<eps>', '4'), ('sil_s0', '<eps>', '4'), ('sil_s0', '<eps>', '4'), ('sil_s0', '<eps>', '4'), ('sil_s0', '<eps>', '4'),
    ('sil_s0', '<eps>', '4'), ('sil_s0', '<eps>', '4'), ('sil_s0', '<eps>', '4'), ('sil_s0', '<eps>', '4'), ('sil_s0', '<eps>', '4'), ('sil_s0', '<eps>', '4'), ('sil_s0', '<eps>', '4'), ('sil_s0', '<eps>', '4'), ('sil_s0', '<eps>', '4'), ('sil_s0', '<eps>', '4'), ('sil_s0', '<eps>', '4'), ('sil_s0', '<eps>', '4'), ('sil_s2', '<eps>', '8'), ('sil_s4', '<eps>', '10'), ('hh_s0', '<eps>', '16'), ('hh_s0', '<eps>', '16'), ('hh_s0', '<eps>', '16'), ('hh_s0', '<eps>', '16'), ('hh_s0', '<eps>', '16'), ('hh_s0', '<eps>', '16'), ('hh_s0', '<eps>', '16'), ('hh_s1', '<eps>', '23'), ('hh_s1', '<eps>', '23'), ('hh_s1', '<eps>', '23'), ('hh_s1', '<eps>', '23'), ('hh_s2', '<eps>', '32'), ('hh_s2', '<eps>', '32'), ('ihii_s0', '<eps>', '46'), ('ihii_s1', '<eps>', '67'), ('ihii_s1', '<eps>', '67'), ('ihii_s1', '<eps>', '67'), ('ihii_s1', '<eps>', '67'), ('ihii_s1', '<eps>', '67'), ('ihii_s1', '<eps>', '67'), ('ihii_s1', '<eps>', '67'), ('ihii_s1', '<eps>', '67'), ('ihii_s1', '<eps>', '67'), ('ihii_s2', 'his', '95'), ('ihii_s2', 'his', '95'), ('ihii_s2', 'his', '95'), ('z_s0', '<eps>', '135'), ('z_s0', '<eps>', '135'), ('z_s1', '<eps>', '162'), ('z_s1', '<eps>', '162'), ('z_s1', '<eps>', '162'), ('z_s2', '<eps>', '219'), ('z_s2', '<eps>', '219'), ('z_s2', '<eps>', '219'), ('z_s2', '<eps>', '219'), ('w_s0', '<eps>', '280'), ('w_s0', '<eps>', '280'), ('w_s0', '<eps>', '280'), ('w_s0', '<eps>', '280'), ('w_s0', '<eps>', '280'), ('w_s0', '<eps>', '280'), ('w_s0', '<eps>', '280'), ('w_s1', '<eps>', '355'), ('w_s1', '<eps>', '355'), ('w_s1', '<eps>', '355'), ('w_s2', '<eps>', '431'), ('w_s2', '<eps>', '431'), ('erii_s0', '<eps>', '497'), ('erii_s0', '<eps>', '497'), ('erii_s1', '<eps>', '572'), ('erii_s2', 'work', '642'), ('erii_s2', 'work', '642'), ('erii_s2', 'work', '642'), ('<eps>', '<eps>', '708'), ('k_s0', '<eps>', '772'), ('k_s0', '<eps>', '772'), ('k_s0', '<eps>', '772'), ('k_s1', '<eps>', '842'), ('k_s1', '<eps>', '842'), ('k_s2', '<eps>', '914'), ('k_s2', '<eps>', '914'), ('aeii_s0', 'at', '309'), ('aeii_s1', '<eps>', '386'), ('aeii_s2', '<eps>', '461'), ('t_s0', '<eps>', '537'), ('t_s0', '<eps>', '537'), ('t_s0', '<eps>', '537'), ('t_s1', 'all', '610'), ('t_s1', 'all', '610'), ('t_s2', '<eps>', '677'), ('aoii_s0', '<eps>', '745'), ('aoii_s0', '<eps>', '745'), ('aoii_s0', '<eps>', '745'), ('aoii_s0', '<eps>', '745'), ('aoii_s1', '<eps>', '805'), ('aoii_s1', '<eps>', '805'), ('aoii_s1', '<eps>', '805'), ('aoii_s1', '<eps>', '805'), ('aoii_s1', '<eps>', '805'), ('aoii_s1', '<eps>', '805'), ('aoii_s2', '<eps>', '877'), ('aoii_s2', '<eps>', '877'), ('aoii_s2', '<eps>', '877'), ('aoii_s2', '<eps>', '877'), ('aoii_s2', '<eps>', '877'), ('aoii_s2', '<eps>', '877'), ('aoii_s2', '<eps>', '877'), ('aoii_s2', '<eps>', '877'), ('aoii_s2', '<eps>', '877'), ('aoii_s2', '<eps>', '877'), ('l_s0', '<eps>', '953'), ('l_s0', '<eps>', '953'), ('l_s0', '<eps>', '953'), ('l_s0', '<eps>', '953'), ('l_s0', '<eps>', '953'), ('l_s0', '<eps>', '953'), ('l_s0', '<eps>', '953'), ('l_s0', '<eps>', '953'), ('l_s0', '<eps>', '953'), ('l_s0', '<eps>', '953'), ('l_s0', '<eps>', '953'), ('l_s1', '<eps>', '1031'), ('l_s1', '<eps>', '1031'), ('l_s1', '<eps>', '1031'), ('l_s2', '<eps>', '1106'), ('l_s2', '<eps>', '1106'), ('l_s2', '<eps>', '1106'), ('l_s2', '<eps>', '1106'), ('l_s2', '<eps>', '1106'), ('l_s2', '<eps>', '1106'), ('l_s2', '<eps>', '1106'), ('l_s2', '<eps>', '1106'), ('l_s2', '<eps>', '1106'), ('l_s2', '<eps>', '1106'), ('l_s2', '<eps>', '1106'), ('<eps>', '<eps>', '1183'), ('sil_s0', '<eps>', '1271'), ('sil_s0', '<eps>', '1271'), ('sil_s0', '<eps>', '1271'), ('sil_s0', '<eps>', '1271'), ('sil_s0', '<eps>', '1271'), ('sil_s0', '<eps>', '1271'), ('sil_s3', '<eps>', '1355'), ('sil_s3', '<eps>', '1355'), ('sil_s3', '<eps>', '1355'), ('sil_s4', '<eps>', '1423'), ('sil_s4', '<eps>', '1423'), ('sil_s4', '<eps>', '1423'), ('sil_s4', '<eps>', '1423'), ('sil_s4', '<eps>', '1423'), ('sil_s4', '<eps>', '1423'), ('sil_s4', '<eps>', '1423'), ('sil_s4', '<eps>', '1423'), ('sil_s4', '<eps>', '1423'), ('sil_s4', '<eps>', '1423'), ('sil_s4', '<eps>', '1423'), ('sil_s4', '<eps>', '1423'), ('sil_s4', '<eps>', '1423'), ('sil_s4', '<eps>', '1423'), ('sil_s4', '<eps>', '1423'), ('sil_s4', '<eps>', '1423')]
    
    print(trans.get_transcript(decouderOutPath, 189))